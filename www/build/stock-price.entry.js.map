{"file":"stock-price.entry.esm.js","mappings":"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","names":[],"sources":["./src/components/stock-price/stock-price.css?tag=stock-price&encapsulation=shadow","./src/components/stock-price/stock-price.tsx"],"sourcesContent":[":host {\n  font-family: sans-serif;\n  border: 2px solid rgb(12, 75, 168);\n  margin: 2rem;\n  padding: 1rem;\n  display: block;\n  width: 20rem;\n  max-width: 100%;\n}\n\nform input {\n  font: inherit;\n  color: rgb(0, 0, 0);\n  padding: 0.1rem 0.25rem;\n  display: block;\n  margin-bottom: 0.5rem;\n}\n\nform input:focus,\nform button:focus {\n  outline: none;\n}\n\nform button {\n  font: inherit;\n  padding: 0.25rem 0.5rem;\n  border: 1px solid rgb(33, 93, 141);\n  background: rgb(19, 61, 120);\n  color: white;\n  cursor: pointer;\n}\n\nform button:hover,\nform button:active {\n  background:rgb(128, 188, 248);\n  border-color: rgb(128, 188, 248);\n}\n\nform button:disabled {\n  background: gray;\n  border-color: gray;\n  color: white;\n  cursor: not-allowed;\n}\n\n:host(.error) {\n  border-color: red;\n}\n\n.lds-ripple {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n.lds-ripple div {\n  position: absolute;\n  border: 4px solid rgb(33, 93, 141);\n  opacity: 1;\n  border-radius: 50%;\n  animation: lds-ripple 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;\n}\n.lds-ripple div:nth-child(2) {\n  animation-delay: -0.5s;\n}\n@keyframes lds-ripple {\n  0% {\n    top: 36px;\n    left: 36px;\n    width: 0;\n    height: 0;\n    opacity: 0;\n  }\n  4.9% {\n    top: 36px;\n    left: 36px;\n    width: 0;\n    height: 0;\n    opacity: 0;\n  }\n  5% {\n    top: 36px;\n    left: 36px;\n    width: 0;\n    height: 0;\n    opacity: 1;\n  }\n  100% {\n    top: 0px;\n    left: 0px;\n    width: 72px;\n    height: 72px;\n    opacity: 0;\n  }\n}\n\n\n\n\n","import { Component, Host, State, h, Element, Prop, Watch, Listen } from '@stencil/core';\nimport { API_KEY } from '../../global/global';\n\n@Component({\n  tag: 'stock-price',\n  styleUrl: 'stock-price.css',\n  shadow: true,\n})\nexport class StockPrice {\n  stockInput: HTMLInputElement\n\n  @Element() el:HTMLElement\n\n  @State() fetchPrice: number\n  @State() stockUserInput: string\n  @State() stockInputValid = false\n  @State() error: string\n  @State() loading = false\n\n  @Prop({mutable: true, reflect: true}) stockSymbol: string\n\n  @Watch(\"stockSymbol\")\n  stockSymbolChanged(newValue: string, oldValue: string) {\n    if(newValue !== oldValue){\n      this.stockUserInput = newValue\n      this.stockInputValid = true\n      this.fetchStockPrice(newValue)\n    }\n  }\n\n  onUserInput(event: Event) {\n    this.stockUserInput = (event.target as HTMLInputElement).value\n    if(this.stockUserInput.trim() !== \"\"){\n      this.stockInputValid = true\n    } else {\n      this.stockInputValid = false\n    }\n  }\n\n  onFetchStockPrice(event: Event) {\n    event.preventDefault()\n    this.stockSymbol = this.stockInput.value\n  }\n\n  componentDidLoad() {\n    if(this.stockSymbol){\n      this.stockUserInput = this.stockSymbol\n      this.stockInputValid = true\n      this.fetchStockPrice(this.stockSymbol)\n    }\n  }\n\n  @Listen(\"ucSymbolSelected\", { target: 'body' })\n  onStockSymbolSelected(event: CustomEvent){\n    if(event.detail && event.detail !== this.stockSymbol){\n      this.stockSymbol = event.detail\n    }\n  }\n\n  test(){\n    this.loading = true\n  }\n\n  fetchStockPrice(stockSymbol: string){\n    this.loading = true\n    fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${stockSymbol}&apikey=${API_KEY}`)\n      .then(res => {\n        return res.json()\n      })\n      .then(parseRes => {\n        if(!parseRes[\"Global Quote\"][\"05. price\"]){\n          throw new Error(\"Invalid symbol\")\n        }\n        this.error = null\n        this.fetchPrice = +parseRes[\"Global Quote\"][\"05. price\"]\n        console.log(parseRes)\n        this.loading = false\n      })\n      .catch(err => {\n        this.fetchPrice = null\n        this.error = err.message\n        this.loading = false\n      })\n  }\n\n  hostData() {\n    return {\n      class: this.error ? \"error\" : \"\"\n    }\n  }\n\n  render() {\n    let dataContent = <p>Please enter a symbol</p>\n    if(this.error) {\n      dataContent = <p>{this.error}</p>\n    }\n    if(this.fetchPrice) {\n      dataContent = <p>Price: ${this.fetchPrice}</p>\n    }\n    if(this.loading){\n      dataContent = (<div class=\"lds-ripple\"><div></div><div></div></div>)\n    }\n    return [\n      <form onSubmit={this.onFetchStockPrice.bind(this)}>\n        <input id=\"stock-symbol\" \n                ref={el => (this.stockInput = el)} \n                value={this.stockUserInput}\n                onInput={this.onUserInput.bind(this)}/>\n        <button type='submit' disabled={!this.stockInputValid || this.loading}>Fetch</button>\n      </form>,\n      <div>\n        {dataContent}\n      </div>\n    ]\n  }\n}\n"],"version":3}